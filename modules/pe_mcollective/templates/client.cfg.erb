# This file managed by Puppet <%= @puppetversion %>
topicprefix     = /topic/
main_collective = mcollective
collectives     = mcollective
libdir          = /opt/puppet/libexec/mcollective/
logfile         = <%= @logfile %>
loglevel        = info

# Security Provider in active use
securityprovider = <%= @mcollective_security_provider %>
# AES Security Provider Configuration
plugin.aespe.client_private = <%= @private_cert_path %>
plugin.aespe.client_public  = <%= @public_cert_path %>
plugin.aespe.serializer     = yaml
plugin.aespe.maximum_age    = 60
# PSK Security Provider Configuration
plugin.psk = <%= @mcollective_psk_string %>

connector = stomp
plugin.stomp.pool.size = <%= @stomp_servers.count %>
<% @stomp_servers.each_with_index do |server,index| -%>
plugin.stomp.pool.host<%= index + 1 %> = <%= server %>
plugin.stomp.pool.port<%= index + 1 %> = <%= @stomp_port %>
plugin.stomp.pool.user<%= index + 1 %> = <%= @stomp_user %>
plugin.stomp.pool.password<%= index + 1 %> = <%= @stomp_password %>
plugin.stomp.pool.ssl<%= index + 1 %> = <%= @mcollective_enable_stomp_ssl %>
<% end -%>
plugin.stomp.base64 = true

# Facts
factsource = yaml
plugin.yaml = /etc/puppetlabs/mcollective/facts.yaml
